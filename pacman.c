//Kütüphaneler
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#include<time.h>
#include<conio.h>
#include<windows.h>
#include<ctype.h>
 
//Ok tuşları , Enter ve ESC 'yi tanımladım
#define LEFT 75 //0x4b=Hexademical version
#define RIGHT 77 //0x4d
#define UP 72 //0x48
#define DOWN 80 //0x50
#define ESC 27 //0x1b
#define ENTER 13 //0x0d
 
 
#define WIDENING_SCREEN HWND console = GetConsoleWindow(); RECT r; GetWindowRect(console,&r); MoveWindow(console,r.left,r.top,800,600,TRUE);
#define NARROWING_SCREEN HWND consoele = GetConsoleWindow(); RECT r; GetWindowRect(console,&r); MoveWindow(console,r.left,r.top,450,540,TRUE);
 
 
 
//Müzik notaları
int muzik[35]={123,1048,784,660,1048,784,660,0,554,1108,830,698,1108,830,698,0,524,1048,784,660,1048,784,660,698,784,830,784,830,880,830,880,988,1048};
int muzik_son[33]={524,588,660,698,0,880,0,784,0,932,0,880,932,1048,880,784,880,932,784,880,932,1048,880,1048,1048,1176,1320,1396,0,1320,0,1396};
 
        
 
int yon=0,x=13,y=13,x_eski,y_eski,son,sonlandir=0,sonuc=0,skor=0;
int bot_sayisi=0;
//Düşman kordinatları
int botx[31]={0,13,66,13,66,26,30,13,66,13,66,13,66,26,30,26,30,13,13,13,13,25,32,40,47,54,26,33,27,52,39},boty[31]={0,6,6,35,35,6,35,25,25,6,6,6,6,35,35,35,35,25,32,25,32,25,25,25,25,25,20,20,29,29,27}  , 
secim_bot[31]={0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},botx_eski[31],boty_eski[31]; 
 
 
//0=Duvar ,2=Yiyecek,1=Yapay zeka noktaları,3=Boşluk
int map[44][79]={
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,2,2,2,1,2,1,2,2,1,2,1,1,1,2,1,2,2,1,2,2,1,2,2,2,1,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,2,2,2,2,2,0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0,2,0,0,0,2,2,0,0,0,2,0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,2,2,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,2,2,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,2,2,2,1,2,2,1,2,2,2,2,2,2,2,2,2,2,1,2,2,1,0,0,0,2,2,0,0,0,1,2,2,1,2,2,2,2,2,2,2,2,2,2,1,2,2,1,2,2,2,2,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,2,2,2,1,2,2,2,2,2,1,2,1,2,1,2,2,1,2,1,2,1,2,2,2,1,1,2,2,2,1,2,1,2,1,2,2,1,2,1,2,1,2,2,2,2,2,1,2,2,2,2,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,2,0,0,0,0,0,2,0,2,0,2,0,0,2,0,2,0,2,0,0,0,0,0,0,0,0,2,0,2,0,2,0,0,2,0,2,0,2,0,0,0,0,0,2,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,2,2,2,1,2,2,2,2,2,1,0,2,0,2,0,0,2,0,2,0,2,2,0,0,0,0,0,0,2,2,0,2,0,2,0,0,2,0,2,0,1,2,2,2,2,2,1,2,2,2,2,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,0,0,0,0,0,0,2,0,2,0,2,0,0,2,0,2,0,1,2,1,0,0,0,0,1,2,1,0,2,0,2,0,0,2,0,2,0,2,0,0,0,0,0,0,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,1,2,2,2,2,2,1,0,2,0,2,0,0,2,0,2,0,2,0,1,1,0,0,1,1,0,2,0,2,0,2,0,0,2,0,2,0,1,2,2,2,2,2,1,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,0,0,0,0,2,0,0,0,0,0,2,0,2,0,1,2,2,1,0,2,0,2,0,0,1,1,2,1,0,0,2,0,2,0,1,2,2,1,0,2,0,2,0,0,0,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,1,2,1,2,1,2,2,1,2,1,2,0,2,0,0,0,0,0,0,2,0,2,0,0,0,2,0,0,0,0,2,0,2,0,0,0,0,0,0,2,0,2,0,0,0,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,0,0,0,0,2,0,1,2,2,2,2,2,2,1,0,2,0,0,0,1,1,0,0,0,2,0,1,2,2,2,2,2,2,1,0,2,0,0,0,0,0,2,0,0,0,0,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,2,2,2,1,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1,0,0,0,0,0,1,2,2,2,2,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,1,2,2,1,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,1,2,2,1,2,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,1,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,1,0,1,2,1,2,2,1,0,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,2,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,2,0,2,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,2,2,2,1,2,1,2,1,2,1,0,0,1,2,2,2,2,2,2,2,1,0,2,0,1,1,0,2,0,1,2,2,2,2,2,2,2,1,0,0,1,2,1,2,1,2,1,2,2,2,2,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,2,0,2,0,2,0,0,2,0,0,0,0,0,0,0,2,0,2,0,0,2,0,2,0,2,0,0,0,0,0,0,0,2,0,0,2,0,2,0,2,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,2,0,2,0,2,0,0,2,0,1,2,2,2,2,2,1,0,2,0,1,1,0,2,0,1,2,2,2,2,2,1,0,2,0,0,2,0,2,0,2,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,2,2,1,2,2,0,2,0,2,0,2,0,0,2,0,2,0,0,0,0,0,2,0,2,0,2,0,0,2,0,2,0,0,0,0,0,2,0,2,0,0,2,0,2,0,2,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,2,0,2,0,2,0,0,2,0,2,0,1,2,2,2,1,0,2,0,1,1,0,2,0,1,2,2,2,1,0,2,0,2,0,0,2,0,2,0,2,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,2,0,0,0,0,2,0,2,0,2,0,2,0,0,2,0,2,0,2,0,0,0,2,0,2,0,0,2,0,2,0,2,0,0,0,2,0,2,0,2,0,0,2,0,2,0,2,0,2,0,0,0,0,2,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,1,2,2,1,2,1,2,1,2,1,2,1,1,1,1,2,1,1,1,2,1,2,1,2,1,2,2,1,1,1,2,1,2,2,2,1,2,1,2,1,2,2,1,2,1,2,1,2,1,2,2,2,1,1,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
    { 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3}
};
 
 
 
//Renk fonksiyonu
void color(int color){
    HANDLE hStdout;
    hStdout=GetStdHandle(STD_OUTPUT_HANDLE);
    SetConsoleTextAttribute(hStdout,color);
    
}
 
//Kordinat fonksiyonum
void gotoxy(int x,int y){
    COORD kordinat;
    kordinat.X=x;
    kordinat.Y=y;
    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE),kordinat);
    
}
 
//Çerçeve ve Oyun bilgisi fonksiyonu
void welcome(){
    color(6);
    for(int x=0;x<79;x++){
       gotoxy(x,0);
       Sleep(2);
       putchar(219);
            }
    for(int y=0;y<24;y++){
       gotoxy(78,y);
       Sleep(2);
       putchar(219);
    }
            
     for(int x=78;x>0;x--)
     {
       gotoxy(x,23);
       Sleep(2);
       putchar(219);
     }
     for(int y=23;y>0;y--)
     {
       gotoxy(0,y);
       Sleep(2);
       putchar(219);
     }
     for(int x=5;x<73;x++){
        gotoxy(x,4);
        putchar(196);
     }
     for(int x=5;x<73;x++){
        gotoxy(x,20);
        putchar(196);
     }
     for(int y=5;y<20;y++){
        gotoxy(5,y);
        putchar(179);
     }
     for(int y=5;y<20;y++){
        gotoxy(73,y);
        putchar(179);
     }
    gotoxy(5,4);putchar(218);
    gotoxy(73,4);putchar(191);
    gotoxy(5,20);putchar(192);
    gotoxy(73,20);putchar(217);
    system("title PACMAN v.2.3");
    gotoxy(40,1);color(15);printf("PACMAN");color(6);
    gotoxy(32,4);color(2);printf("\xDB\xDBGame  Information\xDB\xDB");color(6);
    gotoxy(35,6);printf("Food : %c",43);
    gotoxy(32,8);color(4);printf("  Enemy : %c",2);color(6);
    gotoxy(32,10);printf("Move : Arrow keys");
    gotoxy(50,9);putchar(24);
    gotoxy(50,11);putchar(25);
    gotoxy(51,10);putchar(26);
    gotoxy(49,10);putchar(27);
    gotoxy(28,13);color(2);printf("Enter number of enemies<1-30> : ");color(15);scanf("%d",&bot_sayisi);color(6);
    gotoxy(28,15);printf(" Press Enter to start .");
    gotoxy(18,17);printf ("        (c) Copyright 2014, Yusuf Kildan");
        if(bot_sayisi>30 || bot_sayisi<=0){
        system("CLS");
        gotoxy(18,7);color(10);printf("Please re-enter the number of enemies <1-30>");color(6);
        Sleep(4000);
        system("CLS");
        welcome();
       
        
    
    }
    while(getch()!=ENTER){}
    system("CLS");
        
    }
    
//Yükleniyor animasyonu    
void loading(){
    system("Color F0");
    gotoxy(32,9);printf("LOADING GAME");
    for(int i=26;i<=50;i++){gotoxy(i,10);putchar(196);}
    for(int i=26;i<=50;i++){gotoxy(i,12);putchar(196);   }
    for(int i=26;i<=50;i++){gotoxy(i,11);color(10);putchar(219);
    Sleep(100);
    color(6);
    }
    system("CLS");
    
    
}
 
 
 
 
void bot(int n){
    if(map[boty[n]][botx[n]]==1){
        secim_bot[n]=rand()%5;
        
    }
    if(secim_bot[n]==1){
        botx_eski[n]=botx[n]; botx[n]++; if(map[boty[n]][botx[n]]!=1  && map[boty[n]][botx[n]]!=2 && map[boty[n]][botx[n]]!=3 && map[boty[n]][botx[n]]!=4){ botx[n]--;secim_bot[n]=rand()%5;}
    }
    if(secim_bot[n]==2){
            botx_eski[n]=botx[n]; botx[n]--; if(map[boty[n]][botx[n]]!=1  && map[boty[n]][botx[n]]!=2 && map[boty[n]][botx[n]]!=3 && map[boty[n]][botx[n]]!=4){ botx[n]++;secim_bot[n]=rand()%5;}
    }
    if(secim_bot[n]==3){
            boty_eski[n]=boty[n]; boty[n]++; if(map[boty[n]][botx[n]]!=1  && map[boty[n]][botx[n]]!=2 && map[boty[n]][botx[n]]!=3 && map[boty[n]][botx[n]]!=4){ boty[n]--;secim_bot[n]=rand()%5;}
    }
    if(secim_bot[n]==4){
            boty_eski[n]=boty[n]; boty[n]--; if(map[boty[n]][botx[n]]!=1  && map[boty[n]][botx[n]]!=2 && map[boty[n]][botx[n]]!=3 && map[boty[n]][botx[n]]!=4){ boty[n]++;secim_bot[n]=rand()%5;}
    }
    
        gotoxy(botx[n],boty[n]);color(4);putchar(2);color(6);
    
     if(botx[n]==x && boty_eski[n]==y && boty[n]==y_eski ) 
     sonlandir=1;
     if(boty[n]==y && botx_eski[n]==x && botx[n]==x_eski )
     sonlandir=1;
     if(botx[n]==x && boty[n]==y)
     sonlandir=1;
  
}
 
 
 
int main(){
    system("title Programmer By YUSUF KILDAN v.2.3");
    loading();
    welcome();
    WIDENING_SCREEN
    
   
for(int y=2;y<44;y++){
    for(int x=2;x<78;x++){
        gotoxy(x,y);
        if(map[y][x]==2) putchar(43);
        if(map[y][x]==0 ){color(3);putchar(219);color(6);} 
        if(map[y][x]==3) putchar(177);
        
        }if(y<34)Beep(muzik[y],120);}
    
    while(son!=1 && sonuc!=1){
    
    if(kbhit()){
    switch(getch()){
        case LEFT:yon=1;break;
        case RIGHT:yon=2;break;
        case UP:yon=3;break;
        case DOWN:yon=4;break;
        case ESC :son=1;break;
        
    }
    }
    if(kbhit()){
        switch(getch()){
            case LEFT: yon=1;break;
            case RIGHT: yon=2;break;
            case UP:  yon=3;break;
            case DOWN: yon=4;break;
            case ESC : son=1;break;
        }
        
    }
 
    if(yon==1){
        x_eski=x; x--; if(map[y][x]!=1 && map[y][x]!=2 && map[y][x]!=3 && map[y][x]!=4)x++;
    }
    if(yon==2){
        x_eski=x; x++; if(map[y][x]!=1 && map[y][x]!=2 && map[y][x]!=3 && map[y][x]!=4) x--;
    }
    if(yon==3){
        y_eski=y; y--; if(map[y][x]!=1 && map[y][x]!=2 && map[y][x]!=3 && map[y][x]!=4 )y++;
    }
    if(yon==4){
        y_eski=y; y++; if(map[y][x]!=1 && map[y][x]!=2 && map[y][x]!=3 && map[y][x]!=4) y--;
    }
     if(sonlandir==1)
           sonuc=1;
    gotoxy(x,y);color(10);putchar(2);color(6);
 
        if(map[y][x]==2){  
            map[y][x]=4;
            
            skor=skor+45+bot_sayisi;
            
        }
           if(sonlandir==1)
            sonuc=1;
        
        for(int a=1;a<=bot_sayisi;a++){
        bot(a);
        }
        if(sonlandir==1)
        sonuc=1;
        Sleep(100);
    
        for(int a=1;a<=bot_sayisi;a++){
        gotoxy(botx[a],boty[a]);
        if(map[boty[a]][botx[a]]==2) putchar(43);
          else putchar(255);
        
        }
        gotoxy(x,y);putchar(255);
        
           if(sonlandir==1)
        sonuc=1;
        
        
        gotoxy(5,45);color(2);printf("SKOR=%d",skor);color(6);
        gotoxy(38,5);color(12);printf("PACMAN");color(6);
    
    }
    
    
 
    
    if(sonuc==1)
      {
                  gotoxy(35,45);
                  color(4);printf("GAME OVER... ");color(6);
                 
            
                  for(int i=1;i<=30;i++) Beep(muzik_son[i],120);
            
                  gotoxy(30,44);
                  color(10);printf("Press to exit 'ESC' ");color(6);
                  while(getch()!=ESC)
                  {}
      }
 
 
 
 
    return 0;
}